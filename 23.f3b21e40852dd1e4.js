"use strict";var S=(C,p,i)=>{if(p.has(C))throw TypeError("Cannot add the same private member more than once");p instanceof WeakSet?p.add(C):p.set(C,i)};(self.webpackChunktest_task=self.webpackChunktest_task||[]).push([[23],{2023:(C,p,i)=>{var b,x;i.r(p),i.d(p,{AuthModule:()=>U});var _=i(6895),P=i(2467),c=i(433),k=i(7579),y=i(2722),O=i(6810),E=i(5832),F=i(1357),d=(()=>{return(s=d||(d={})).NO_CONNECT="\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0441 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442\u043e\u043c",s.ERROR_SERVER="\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430",s.SUCCESS="\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c",d;var s})(),m=(()=>{return(s=m||(m={})).TOKEN="token",s.REFRESH_TOKEN="refreshToken",s.SANED_PASSWORD="savedPassword",m;var s})(),t=i(4650),w=i(529);let T=(()=>{class s{constructor(e){this.http=e,this.urlSignin="login"}sendSigninRequest(e){let n=new w.WM({"Content-Type":"application/json"});return this.http.post(this.urlSignin,e,{headers:n})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(w.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const a=class{constructor(o,e){this.document=o,this.platformId=e,this.documentIsAccessible=(0,_.NF)(this.platformId)}static getCookieRegExp(o){const e=o.replace(/([\[\]{}()|=;+?,.*^$])/gi,"\\$1");return new RegExp("(?:^"+e+"|;\\s*"+e+")=(.*?)(?:;|$)","g")}static safeDecodeURIComponent(o){try{return decodeURIComponent(o)}catch{return o}}check(o){return!!this.documentIsAccessible&&(o=encodeURIComponent(o),a.getCookieRegExp(o).test(this.document.cookie))}get(o){if(this.documentIsAccessible&&this.check(o)){o=encodeURIComponent(o);const n=a.getCookieRegExp(o).exec(this.document.cookie);return n[1]?a.safeDecodeURIComponent(n[1]):""}return""}getAll(){if(!this.documentIsAccessible)return{};const o={},e=this.document;return e.cookie&&""!==e.cookie&&e.cookie.split(";").forEach(n=>{const[r,h]=n.split("=");o[a.safeDecodeURIComponent(r.replace(/^ /,""))]=a.safeDecodeURIComponent(h)}),o}set(o,e,n,r,h,g,M){if(!this.documentIsAccessible)return;if("number"==typeof n||n instanceof Date||r||h||g||M)return void this.set(o,e,{expires:n,path:r,domain:h,secure:g,sameSite:M||"Lax"});let l=encodeURIComponent(o)+"="+encodeURIComponent(e)+";";const u=n||{};u.expires&&(l+="number"==typeof u.expires?"expires="+new Date((new Date).getTime()+1e3*u.expires*60*60*24).toUTCString()+";":"expires="+u.expires.toUTCString()+";"),u.path&&(l+="path="+u.path+";"),u.domain&&(l+="domain="+u.domain+";"),!1===u.secure&&"None"===u.sameSite&&(u.secure=!0,console.warn(`[ngx-cookie-service] Cookie ${o} was forced with secure flag because sameSite=None.More details : https://github.com/stevermeister/ngx-cookie-service/issues/86#issuecomment-597720130`)),u.secure&&(l+="secure;"),u.sameSite||(u.sameSite="Lax"),l+="sameSite="+u.sameSite+";",this.document.cookie=l}delete(o,e,n,r,h="Lax"){if(!this.documentIsAccessible)return;const g=new Date("Thu, 01 Jan 1970 00:00:01 GMT");this.set(o,"",{expires:g,path:e,domain:n,secure:r,sameSite:h})}deleteAll(o,e,n,r="Lax"){if(!this.documentIsAccessible)return;const h=this.getAll();for(const g in h)h.hasOwnProperty(g)&&this.delete(g,o,e,n,r)}};let f=a;b=new WeakMap,x=new WeakMap,S(f,b,a.\u0275fac=function(e){return new(e||a)(t.LFG(_.K0),t.LFG(t.Lbi))}),S(f,x,a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}));var A=i(2997);const I=[{path:"",component:(()=>{class s{constructor(e,n,r,h,g){this.fb=e,this.authService=n,this.route=r,this.cookieService=h,this.store=g,this.inputType="password",this.isSubmitForm=!1,this.message="",this.isResponseSuccess=!1,this.isSavePassword=!1,this.savedPassword=m.SANED_PASSWORD,this.ngUnsubscribe$=new k.x}ngOnInit(){this.initForm(),this.getSavedPassword()}initForm(){this.authForm=this.fb.group({email:["",c.kI.required],password:["",[c.kI.required,c.kI.minLength(6)]]})}getSavedPassword(){const e=localStorage.getItem(this.savedPassword);e&&this.authForm.patchValue({password:e})}get email(){return this.authForm.get("email")}get password(){return this.authForm.get("password")}toggleInputType(){this.inputType="password"===this.inputType?"text":"password"}onSubmitForm(){this.savePassword(),this.authForm.invalid||this.authService.sendSigninRequest({login:this.authForm.value.email,password:this.authForm.value.password}).pipe((0,y.R)(this.ngUnsubscribe$)).subscribe({next:n=>this.handleSigninSuccess(n),error:n=>this.handleSigninError(n)})}handleSigninSuccess(e){this.isSubmitForm=!1,this.message=d.SUCCESS,this.showTooltip(this.message,O.Jh.green),this.isResponseSuccess=!0,this.saveCookies(e),this.saveProfileToStore(e),this.routingToDashboard()}handleSigninError(e){this.isSubmitForm=!1,this.message=e.error.errors?String(e.error.errors):0===e.status?d.NO_CONNECT:d.ERROR_SERVER,this.showTooltip(this.message,O.Jh.red),this.isResponseSuccess=!1,this.authForm.reset()}showTooltip(e,n){this.store.dispatch((0,F.i)({tooltip:{message:e,color:n,id:window.crypto.randomUUID()}}))}saveProfileToStore(e){this.store.dispatch((0,E.d)({profile:{userId:e.userInfo.userId,userName:e.userInfo.userName,userAvatar:e.userInfo.userAvatar,userRole:e.userInfo.userRole}}))}savePassword(){const e=localStorage.getItem(this.savedPassword);this.isSavePassword?e||localStorage.setItem(this.savedPassword,this.authForm.value.password):localStorage.removeItem(this.savedPassword)}isPasswordRemembered(){localStorage.getItem(this.savedPassword)}changeValueCheckbox(){this.isSavePassword=!this.isSavePassword}saveCookies(e){this.cookieService.set(m.TOKEN,e.tokens.token),this.cookieService.set(m.TOKEN,e.tokens.refreshToken)}routingToDashboard(){this.route.navigate(["/dashboard"])}ngOnDestroy(){this.ngUnsubscribe$.next(),this.ngUnsubscribe$.complete()}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(c.qu),t.Y36(T),t.Y36(P.F0),t.Y36(f),t.Y36(A.yh))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-login-page"]],decls:27,vars:4,consts:[[1,"auth"],[1,"auth__logo"],[1,"auth__content"],[1,"auth__title"],[1,"auth__subtitle"],[1,"form",3,"formGroup","ngSubmit"],[1,"form__item"],["for","inputLogin"],["formControlName","email","placeholder","mail@simmmple.com","id","inputLogin","type","text"],["for","inputPassword"],["formControlName","password","placeholder","\u041c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432","id","inputPassword",3,"type","click"],["type","button",3,"click"],[3,"ngClass"],[1,"form__footer"],["for","inputCheckbox",1,"form__checkbox"],["id","inputCheckbox","type","checkbox",3,"click"],["type","submit",1,"form__btn",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2)(3,"h1",3),t._uU(4,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c"),t.qZA(),t.TgZ(5,"h4",4),t._uU(6,"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"),t.qZA(),t.TgZ(7,"form",5),t.NdJ("ngSubmit",function(){return n.onSubmitForm()}),t.TgZ(8,"div",6)(9,"label",7),t._uU(10,"\u041b\u043e\u0433\u0438\u043d*"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t.TgZ(12,"div",6)(13,"label",9),t._uU(14,"\u041f\u0430\u0440\u043e\u043b\u044c*"),t.qZA(),t.TgZ(15,"input",10),t.NdJ("click",function(){return n.getSavedPassword()}),t.qZA(),t.TgZ(16,"button",11),t.NdJ("click",function(){return n.toggleInputType()}),t._UZ(17,"div",12),t.qZA()(),t.TgZ(18,"div",13)(19,"label",14)(20,"input",15),t.NdJ("click",function(){return n.changeValueCheckbox()}),t.qZA(),t._UZ(21,"span"),t._uU(22," \u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c "),t.qZA(),t.TgZ(23,"a"),t._uU(24,"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"),t.qZA()(),t.TgZ(25,"button",16),t._uU(26,"\u0412\u043e\u0439\u0442\u0438"),t.qZA()()()()),2&e&&(t.xp6(7),t.Q6J("formGroup",n.authForm),t.xp6(8),t.Q6J("type",n.inputType),t.xp6(2),t.Q6J("ngClass","password"===n.inputType?"icon-eye active":"icon-eye"),t.xp6(8),t.Q6J("disabled",n.authForm.invalid))},dependencies:[_.mk,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u],styles:['@charset "UTF-8";*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;background:#F9F9F9}body[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Inter,sans-serif}.auth[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%], .auth[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%], .auth[_ngcontent-%COMP%]{display:flex;flex-direction:column}.auth[_ngcontent-%COMP%]{align-items:center;gap:100px;width:410px;margin:273px auto 0}.auth__logo[_ngcontent-%COMP%]{width:100px;height:69px;background:url(logo-auth-page.2373ab09aab2c497.svg)}.auth__title[_ngcontent-%COMP%]{font-size:2.25rem;font-weight:700;margin:0 0 15px}.auth__subtitle[_ngcontent-%COMP%]{font-size:1rem;font-weight:400;color:#6f727a;margin:0 0 15px}.auth[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{gap:30px}.auth[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%]{gap:10px;height:74px;position:relative}.auth[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.875rem;font-weight:700;font-family:DM Sans,sans-serif}.auth[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{height:50px;border:1px solid #a9abad;border-radius:5px;padding:0 10px;font-size:.875rem;font-weight:400;letter-spacing:1px}.auth[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#6f727a}.auth[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:20px;height:20px;position:absolute;top:41px;right:20px;border:none;background:inherit;cursor:pointer}.auth[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%]   .icon-eye[_ngcontent-%COMP%]{background:url(icon-eye.237ab6b2210f7fd6.svg);width:100%;height:14px}.auth[_ngcontent-%COMP%]   .form__item[_ngcontent-%COMP%]   .icon-eye.active[_ngcontent-%COMP%]{background:url(icon-eye-closed.2e235281fde24e31.svg);height:7px}.auth[_ngcontent-%COMP%]   .form__footer[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.auth[_ngcontent-%COMP%]   .form__checkbox[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;cursor:pointer}.auth[_ngcontent-%COMP%]   .form__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:0;display:none}.auth[_ngcontent-%COMP%]   .form__checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:16px;height:16px;border:1px solid #4C54F4;border-radius:5px;position:relative}.auth[_ngcontent-%COMP%]   .form__checkbox[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{content:"\\2713";position:absolute;font-size:.7rem;font-weight:700;top:-1px;right:-1px;color:#fff;width:12px;height:10px;transition:.3s}.auth[_ngcontent-%COMP%]   .form__checkbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:#4C54F4}.auth[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;font-size:.875rem;font-weight:500;color:#4c54f4}.auth[_ngcontent-%COMP%]   .form__btn[_ngcontent-%COMP%]{width:118px;height:54px;border:none;border-radius:12px;background:#4C54F4;color:#fff;align-self:center;font-size:1.125rem;font-weight:500;cursor:pointer}.auth[_ngcontent-%COMP%]   .form__btn[_ngcontent-%COMP%]:disabled{background:#3d3e41}']}),s})()}];let R=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[P.Bz.forChild(I),P.Bz]}),s})(),U=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[_.ez,R,c.UX]}),s})()}}]);